<div *ngIf="false" class="example-container mat-elevation-z8">
	<div class="example-loading-shade" *ngIf="isLoadingResults">
		<mat-spinner *ngIf="isLoadingResults"></mat-spinner>
	</div>
	<mat-card class="example-card">
		<form [formGroup]="loginForm" (ngSubmit)="onFormSubmit()">
			<h2>Log In</h2>
			<mat-form-field class="example-full-width">
				<label>
					<input matInput placeholder="Username" formControlName="username" [errorStateMatcher]="matcher" />
				</label>
				<mat-error>
					<span *ngIf="!loginForm.get('username').valid && loginForm.get('username').touched">Please enter Username</span>
				</mat-error>
			</mat-form-field>
			<mat-form-field class="example-full-width">
				<label>
					<input type="password" matInput placeholder="Password" formControlName="password" [errorStateMatcher]="matcher" />
				</label>
				<mat-error>
					<span *ngIf="!loginForm.get('password').valid && loginForm.get('password').touched">Please enter Password</span>
				</mat-error>
			</mat-form-field>
			<div class="button-row">
				<button type="submit" [disabled]="!loginForm.valid" mat-flat-button color="primary"><mat-icon>login</mat-icon>Login</button>
				<h4 *ngIf="serverError" style="color: red">{{ serverErrorMessage }}</h4>
			</div>
			<div class="button-row">
				<h4>Don't have an account?</h4>
			</div>
			<div class="button-row">
				<a mat-flat-button color="primary" [routerLink]="['/register']"><mat-icon>how_to_reg</mat-icon>Register</a>
			</div>
		</form>
	</mat-card>
</div>

<div class="flex-center" style="height: 100vh">
	<h1 class="mat-display-1">Login</h1>

	<mat-card class="example-card mat-elevation-z8">
		<div *ngIf="username" class="message-box">
			<div>
				Your Username is: <span class="font-black">{{ username }}</span>
			</div>
		</div>
		<div *ngIf="sessionExpired" class="message-box error">
			<div>
				{{ sessionExpired }}
			</div>
		</div>
		<div *ngIf="serverError" class="message-box error">
			<div>
				{{ serverErrorMessage }}
			</div>
		</div>
		<td-dynamic-forms #loginForm [elements]="loginElements">
			<ng-template let-element ngFor [ngForOf]="loginElements">
				<ng-template let-control="control" [tdDynamicFormsError]="element.name">
					<span *ngIf="control.touched || !control.pristine">
						<span *ngIf="control.hasError('required')">This field is required</span>
					</span>
				</ng-template>
			</ng-template>
		</td-dynamic-forms>
		<button style="width: 100%; margin-top: 10px" (click)="submitManualValidator()" [disabled]="!loginForm.valid" mat-raised-button color="primary" class="font-bold">Submit</button>
	</mat-card>

	<div class="flex-row margin-top">
		<div class="button-row">
			<p class="font-light">New User ? Register Below</p>
		</div>
		<div class="button-row">
			<a mat-flat-button color="accent" [routerLink]="['/register']"><mat-icon>person_add</mat-icon>Register</a>
		</div>
	</div>
</div>
